<html>

<head>
    <script src=".././maths.js"></script>
    <script src=".././gfx.js"></script>
    <script src=".././main.js"></script>
    <script src=".././tattle.js"></script>
    <script src=".././sprite.js"></script>
    <script src=".././part.js"></script>
    <script src=".././entity.js"></script>

</head>

<body onload="_start(33,true)" style="border:none">
    <script>
        // this is where you use the tools to make your program
        const sprite1 = new Sprite([
            new SpriteLine(0, -200, 100, 100, '#ff0', 3),
            new SpriteLine(100, 100, -100, 100, '#ff0', 4),
            new SpriteLine(-100, 100, 0, -200, '#ff0', 3)
        ]);
        const sprite2 = new Sprite([
            new SpriteLine(0, -70, 70, 70, '#f0f', 2),
            new SpriteLine(70, 70, -70, 70, '#f0f', 2),
            new SpriteLine(-70, 70, 0, -70, '#f0f', 2)
        ]);
        //name, sprites, position, angle, velocity, spin, mass
        const entity1 = new Entity(
            'Test1',
            [sprite1, sprite2],
            { x: 1500, y: 2500 },
            rad(45),
            { x: -50, y: -50 }
            , rad(10), 100, 150
        );
        const entity2 = new Entity(
            'Test2',
            [sprite1, sprite2],
            { x: -1600, y: -3100 },
            rad(325),
            { x: 20, y: 20 }
            , rad(10), 100, 150
        );

        const entity3 = new Entity(
            'Test3',
            [sprite1, sprite2],
            { x: 0, y: 0 },
            rad(rnd(0, 360)),
            { x: 3, y: -2 }
            , rad(25), 100, 150
        );
        const partSprite = new Sprite([
            new SpriteLine(10, 10, -10, 10, '0f0', 1),
            new SpriteLine(-10, 10, -10, -10, '0f0', 1),
            new SpriteLine(-10, -10, 10, -10, '0f0', 1),
            new SpriteLine(10, -10, 10, 10, '0f0', 1),
        ]);
        /* THE CLONING THING IS BECAUSE THE PART AND THE ENTITY ARE BONDED, IF YOU 
         REUSE THE SAME PART ALL THE ENTITIES POINT TO THE SAME ONE, AND THE PART THINKS
         IT'S OWNER IS WHO EVER IT WAS _LAST_ ATTACHED TO! CLONING MAKES THEM INDEPENDENT
         INSTANCES OF THE THING BEING CLONED.*/
        const part = new Part(partSprite, { 'x': 0, 'y': -24 }, 0);
        
        entity1.addPart(part.clone());
        entity2.addPart(part.clone());
        entity3.addPart(part.clone());
        const program = {
            run: function () {
                entity1.draw();
                entity1.move();
                entity2.draw();
                entity2.move();
                entity3.draw();
                entity3.move();
            }
        };
    </script>
</body>

</html>