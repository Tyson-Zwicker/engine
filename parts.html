<html>

<head>
    <script src="./maths.js"></script>
    <script src="./main.js"></script>
    <script src="./tattle.js"></script>
    <script src="./sprite.js"></script>
    <script src="./button.js"></script>
    <script src="./touchables.js"></script>
    <script src="./entity.js"></script>
</head>

<body onload="buildPage(33)" style="border:none">
    <script>
        // this is where you use the tools to make your game
        const debug = true;

        const testButton = new Button(
            'button1', 'Some Text!', 30, 30, 180, 60, 1.1, '#ff0', '#00f'
        );

        const touchables = new Touchables([
            new Touchable(
                'button1', 30, 30, 180, 60,
                (msg) => {
                    console.log(`You pressed it: ${msg}`);
                },
                testButton)
        ]);
        const sprite1 = new Sprite([
            new SpriteLine(-100, -100, 100, -100, '#ff0', 2),
            new SpriteLine(100, -100, 0, 100, '#ff0', 2),
            new SpriteLine(0, 100, -100, -100, '#ff0', 2)
        ]);
        const sprite2 = new Sprite([
            new SpriteLine(-70, -70, 70, -70, '#f0f', 2),
            new SpriteLine(70, -70, 0, 90, '#f0f', 2),
            new SpriteLine(0, 90, -70, -70, '#f0f', 2)
        ]);
        //name, sprites, position, angle, velocity, spin, mass
        const entity1 = new Entity(
            'Test1',
            [sprite1, sprite2],
            { x: 0, y: 0 },
            rad(45),
            { x: 1, y: 1 }
            , rad(1), 10);
        const entity2 = new Entity(
            'Test2',
            [sprite1, sprite2],
            { x: -50, y: 400 },
            rad(270),
            { x: 3, y: -2 }
            , rad(0.5), 10);
        const part = (
            new Sprite (
                new SprintLine (10,10,-10,10,'0f0',1),
                new SprintLine (-10,10,-10,-10,'0f0',1),
                new SprintLine (-10,-10,10,-10,'0f0',1),
                new SprintLine (10,-10,10,10,'0f0',1),
            )
            
        )
        const game = {
            run: function (delta) {
                //scale, rotation, offset
                //sprite1.draw(1, rad(45), { x: 400, y: 400 });
                //sprite2.draw(1, rad(45), { x: 400, y: 400 });
                
                //camera, scale
                let camera = {x:0,y:0};
                let scale = 1;
                entity1.draw (camera, scale);  
                entity1.move (delta);       
                entity2.draw (camera, scale);  
                entity2.move (delta);        
                testButton.draw();
                touchables.check();
            }
        };
    </script>
</body>

</html>